{% load static %}
{% load permisos %}
{% load grupo_tags %}
{% comment %} {% load ValidadorTags %} {% endcomment %}

{% comment %} Pantalla de carga que se activa utilizando la funcion loadingPage() de Core/js/pantalla_carga.js {% endcomment %}
{% include 'Core/pantalla_carga.html'%}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Logipuerto{% endblock %}</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
    <!-- font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bootstrap CSS -->
    {% comment %} <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> {% endcomment %}

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Bootstrap JS y Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    {% block extra_css %}
    {% endblock %}
    <link rel="stylesheet" href="{% static 'Core/css/base.css' %}">
</head>

    {% comment %} template tag que permite obtener todos los permisos del usuario y guardarlos en una variable {% endcomment %}

<body>
    
    <div class="lp-sidebar-overlay" id="sidebarOverlay"></div>

    <div class="lp-dashboard-container" id="dashboardContainer">
        {% comment %} <!---------------------------------- Header ----------------------------------> {% endcomment %}
        <header class="lp-header">
            <button class="lp-mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>

            <div class="lp-search-container">
                <input type="text" class="lp-search-input" placeholder="Buscar...">
                <i class="fas fa-search lp-search-icon"></i>
            </div>

            <div class="lp-header-actions">
                <div class="lp-header-btn-container">
                    <dotlottie-player
                        src="https://lottie.host/678f6d82-93ca-4e9f-88ff-bd792da8d31d/VDItiFmbCx.lottie"
                        background="transparent"
                        speed="1"
                        class="lp-hover-lottie"
                        loop
                        autoplay>
                    </dotlottie-player>

                    <button class="lp-header-btn">
                        <div class="lp-header-title">¿Quiénes somos?</div>
                    </button>
                </div>
                {% if request.user|has_group:'Administrador' or request.user|has_group:'Logipuerto' %}
                <button class="lp-header-btn"  onclick="window.location.href='{% url 'autenticacion:usuarios_bloqueados_lista' %}'" >
                    <i class="fas fa-lock"></i>
                </button>

                <button class="lp-header-btn"  onclick="window.location.href='{% url 'clientes:clientes_padre_vdv_lista'   %}'" >
                    <i class="fas fa-key"></i>
                </button>
                {% endif %}

                <div class="lp-user-profile">
                    {% with user.groups|ComoJson as Grupos %}
                        {% if "Administrador" in Grupos or Logipuerto in Grupos %}
                            <div class="lp-user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                        {% endif %}
                    {% endwith%}
                    <div>
                        <div class="lp-username">{{ user.username }}</div>

                        {% if request.user|has_group:'Administrador' %}
                            <div class="lp-user-role"><p>Administrador </p> </div>
                        {% elif request.user|has_group:'ClienteHijo' %}
                            <div class="lp-user-role"> <p> Usuario Hijo </p></div>
                        {% elif request.user|has_group:'ClientePadre' %}
                            <div class="lp-user-role"> <p>Usuario Padre</p></div>
                        {% elif request.user|has_group:'Logipuerto' %}
                            <div class="lp-user-role"> <p>Logipuerto</p></div>
                        {% elif request.user|has_group:'AgenciaAduanal' %}
                        <div class="lp-user-role"> <p>AgenciaAduanal</p></div>
                        {% elif request.user|has_group:'AgenteAduanal' %}
                        <div class="lp-user-role"> <p>AgenteAduanal</p></div>
                        {% endif %}
                    </div>
                        <i class="fas fa-chevron-down lp-user-dropdown-icon" style="padding: 5px;"></i>
                        <div id="userDropdownModal" class="lp-modal">
                            <div class="lp-modal-content">
                                <span class="lp-modal-close" id="modalClose">&times;</span>
                                <h2>Opciones de Usuario</h2>
                                <form action="{% url 'logout' %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="lp-header-btn">Cerrar sesión</button>
                                </form>
                            </div>
                        </div>
                </div>
            </div>
        </header>

        {% comment %} <!------------------------------- Sidebar ------------------------------------> {% endcomment %}
        <aside class="lp-sidebar" id="sidebar">
            <div class="lp-logo">
                <div class="lp-logo-container" onclick="window.location.href='{% url 'core:inicio' %}'" >
                    <img src="{% static 'Autenticacion/img/logipuerto.png' %}" alt="Logo" class="lp-logo-image">
                </div>
            </div>

            <nav class="lp-nav-menu" id="navMenu">
                {% with user.groups|ComoJson as Grupos %}

                    {% if "Administrador" in Grupos or "Logipuerto" in Grupos %}
                        {% comment %} Panel de Administracion de clientes de Logipuerto {% endcomment %}
                        <div class="lp-nav-item lp-has-dropdown" id="adminDropdown">

                            <div class="lp-nav-link lp-active" data-section="admin">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-tachometer-alt"></i>
                                </div>
                                <div class="lp-nav-text">Admin</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>

                            <div class="lp-dropdown-menu">
                                <div class="lp-dropdown-item" data-section="crear-clientes" onclick="window.location.href='{% url 'autenticacion:usuarios_crear_cliente_padre' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="lp-nav-text">Crear Cliente</div>
                                </div>

                                <div class="lp-dropdown-item" data-section="ver-clientes" onclick="window.location.href='{% url 'clientes:clientes_padre_lista' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-address-book"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver Clientes</div>
                                </div>
                            </div>
                        </div>

                        <div class="lp-nav-item lp-has-dropdown" id="serviciosDropdown">
                            <div class="lp-nav-link" data-section="servicios">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-globe fa-stack"></i>
                                </div>
                                <div class="lp-nav-text">Servicios</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                
                                <div class="lp-dropdown-item" data-section="ver-clientes" onclick="window.location.href='{% url 'solicitudes:solicitudes_tipo_segregacion_crear' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-tags"></i>
                                                                    </div>
                                    <div class="lp-nav-text">Crear Catalogo</div>
                                </div>

                                <div class="lp-dropdown-item" data-section="ver-clientes" onclick="window.location.href='{% url 'solicitudes:solicitudes_masivas__admin' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-clipboard-list"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver Solicitudes </div>
                                </div>

                                <div class="lp-dropdown-item" data-section="categorias-servicios" onclick="window.location.href='{% url 'autenticacion:usuarios_crear_agencia_aduanal' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-handshake"></i>
                                    </div>
                                    <div class="lp-nav-text">Agenciamiento Aduanal</div>
                                </div>

                                <div class="lp-dropdown-item" data-section="categorias-servicios" onclick="window.location.href='{% url 'agenciamiento_aduanal:agencias_aduanales_lista' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-passport"></i>  <!-- Aduana -->
                                    </div>
                                    <div class="lp-nav-text">Agencias Aduanales</div>
                                </div>
                                
                            </div>
                        </div>
                    {% endif %}

                    {%if "Administrador" in Grupos or "ClienteHijo" in Grupos or "ClientePadre" in Grupos%}
                        {% comment %} Menu de servicios para ClienteHijo {% endcomment %}
                        <div class="lp-nav-item lp-has-dropdown" id="serviciosDropdown">
                            <div class="lp-nav-link" data-section="servicios">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-globe fa-stack"></i>
                                </div>
                                <div class="lp-nav-text">Servicios</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                
                                {% if user|tiene_servicio:"Ferrocarril directo" %}
                                <div class="lp-dropdown-item" data-section="crear-servicio" onclick="window.location.href='{% url 'ferrocarril:ferrocarril_inicio' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-train"></i>
                                    </div>
                                    <div class="lp-nav-text">Ferrocarril</div>
                                </div>
                                {% endif %} 

                                {% if user|tiene_servicio:"Transporte" %}

                                {%endif%}

                                <div class="lp-dropdown-item" data-section="categorias-servicios" onclick="window.location.href='{% url 'agenciamiento_aduanal:clientes_padre_agencias_aduanales_escoger' request.user.pk %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-handshake"></i>
                                    </div>
                                    <div class="lp-nav-text">Agenciamiento <br> Aduanal</div>
                                </div>
                                
                            </div>
                        </div>
                    {% endif %}

                    {% if "Administrador" in Grupos or "ClientePadre" in Grupos %}
                        {% comment %} Menu de administración de usuarios de cliente Padre {% endcomment %}
                        <div class="lp-nav-item lp-has-dropdown" id="usersDropdown">
                            <div class="lp-nav-link" data-section="users">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="lp-nav-text">Mis usuarios</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                <div class="lp-dropdown-item" data-section="crear-usurios" onclick="window.location.href='{% url 'autenticacion:usuarios_crear_cliente_hijo' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="lp-nav-text">Crear usuarios</div>
                                </div>
                                <div class="lp-dropdown-item" data-section="crear-clientes" 
                                onclick="window.location.href='{% url 'clientes:clientes_hijos_lista' pk=request.user.id %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-user-friends"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver usuarios</div>
                                </div>
                            </div>
                        </div>

                        <div class="lp-nav-item lp-has-dropdown" id="solicitudesDropdown">
                            <div class="lp-nav-link" data-section="solicitudes">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-file-alt"></i> 
                                </div>
                                <div class="lp-nav-text">Mis Solicitudes</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                <div class="lp-dropdown-item" data-section="ver solicitudes masivas" onclick="window.location.href='{% url 'solicitudes:solicitudes_masivas__cliente_padre' request.user.pk %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-clipboard-list"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver solicitudes</div>
                                </div>
                            </div>
                        </div>                    
                    {% endif %}

                    {% if "Administrador" in Grupos or "AgenciaAduanal" in Grupos%}
                        <div class="lp-nav-item lp-has-dropdown" id="usersDropdown">
                            <div class="lp-nav-link" data-section="users">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="lp-nav-text">Mis usuarios</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                <div class="lp-dropdown-item" data-section="crear-usurios-agenre" onclick="window.location.href='{% url 'autenticacion:usuarios_crear_agente_aduanal' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="lp-nav-text">Registrar Agente</div>
                                </div>
                                <div class="lp-dropdown-item" data-section="ver-agentes" onclick="window.location.href='{% url 'agenciamiento_aduanal:agentes_aduanales_lista' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-user-friends"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver usuarios</div>
                                </div> 
                            </div>
                        </div>

                        <div class="lp-nav-item lp-has-dropdown" id="clientesDropdown">
                            <div class="lp-nav-link" data-section="clientes">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="lp-nav-text">Mis Clientes</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                <div class="lp-dropdown-item" data-section="ver-clientes" onclick="window.location.href='{% url 'agenciamiento_aduanal:agencias_aduanales_clientes_padre_lista' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-address-card"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver Clientes</div>
                                </div>
                                {% comment %} <div class="lp-dropdown-item" data-section="crear-clientes" onclick="window.location.href='{% url 'agenciamiento_aduanal:agentes_aduanales_lista' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-user-friends"></i>
                                    </div>
                                    <div class="lp-nav-text">Ver usuarios</div>
                                </div>  {% endcomment %}
                            </div>
                        </div>
                    {% endif %}

                    {% if "Administrador" in Grupos or "AgenteAduanal" in Grupos%}
                        <div class="lp-nav-item lp-has-dropdown" id="usersDropdown">
                            <div class="lp-nav-link" data-section="users">
                                <div class="lp-nav-icon">
                                    <i class="fas fa-train"></i>
                                </div>
                                <div class="lp-nav-text">Ferrocarril</div>
                                <div class="lp-dropdown-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            <div class="lp-dropdown-menu">
                                <div class="lp-dropdown-item" data-section="crear-usurios-agenre" onclick="window.location.href='{% url 'ferrocarril:ferrocarril_ferro_transporte' %}'">
                                    <div class="lp-nav-icon">
                                        <i class="fas fa-box"></i>
                                    </div>
                                    <div class="lp-nav-text">Solicitud Transporte</div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endwith %}
            </nav>

            <form action="{% url 'logout' %}" method="post" class="">
                <div class="lp-logout">
                {% csrf_token %}
                <button type="submit" class="lp-logout-btn" aria-label="Cerrar sesión">
                    <div class="lp-logout-icon">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <div class="lp-nav-text">Cerrar Sesión</div>
                </button>
                </div>
              </form>
        </aside>
        

        {% comment %} //<!----------------------------- Main Content ----------------------------> {% endcomment %}
        <main class="lp-main-content">

            {% block content %}
            {% endblock %}

        </main>
    </div>

    

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            //lp-user-profile
            const userDropdownIcon = document.querySelector('.lp-user-dropdown-icon');
            const modal = document.getElementById('userDropdownModal');
            const modalClose = document.getElementById('modalClose');
            const orangeToggle = document.getElementById('orangeToggle');
        
            // Abrir el modal al hacer clic en el ícono
            userDropdownIcon.addEventListener('click', function() {
                modal.style.display = 'block';
            });
        
            // Cerrar el modal al hacer clic en el botón de cerrar
            modalClose.addEventListener('click', function() {
                modal.style.display = 'none';
            });
        
            // Cerrar el modal al hacer clic fuera del contenido
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });

            if (orangeToggle.checked) {
                console.log('El toggle está activado');
            } else {
                console.log('El toggle está desactivado');
            }
        
            // Toggle con fondo naranja

        });

    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const logoContainer = document.querySelector('.lp-logo-container');

        // Seleccionar elementos dinámicamente
        const navLinks = document.querySelectorAll('.lp-nav-link');
        const dropdownItems = document.querySelectorAll('.lp-dropdown-item');
        const dropdownContainers = document.querySelectorAll('.lp-nav-item.lp-has-dropdown');

        // Toggle sidebar en móvil
        function toggleSidebar() {
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('lp-show');
                sidebarOverlay.classList.toggle('lp-active');
                document.body.style.overflow = sidebar.classList.contains('lp-show') ? 'hidden' : '';
            }
        }

        // Cerrar sidebar
        function closeSidebar() {
            sidebar.classList.remove('lp-show');
            sidebarOverlay.classList.remove('lp-active');
            document.body.style.overflow = '';
        }

        // Cerrar todos los dropdowns
        function closeAllDropdowns() {
            dropdownContainers.forEach(container => {
                container.classList.remove('lp-open');
            });
        }

        // Inicializar dropdowns
        function initializeDropdowns() {
            dropdownContainers.forEach(container => {
                const navLink = container.querySelector('.lp-nav-link');

                navLink.addEventListener('click', function(e) {

                    e.preventDefault();

                    // Cerrar todos los otros dropdowns
                    dropdownContainers.forEach(otherContainer => {
                        if (otherContainer !== container) {
                            otherContainer.classList.remove('lp-open');
                        }
                    });

                    // Toggle del dropdown actual
                    container.classList.toggle('lp-open');

                    // Manejar estados active
                    navLinks.forEach(l => {
                        if (l !== this) {
                            l.classList.remove('lp-active');
                        }
                    });

                    dropdownItems.forEach(item => item.classList.remove('lp-active'));
                    this.classList.add('lp-active');
                });
            });
        }

        // Event listeners para móvil
        mobileMenuBtn.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

        // Inicializar dropdowns
        initializeDropdowns();

        // Navegación en dropdown items
        dropdownItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();

                // Remover active de todos los elementos
                navLinks.forEach(l => l.classList.remove('lp-active'));
                dropdownItems.forEach(i => i.classList.remove('lp-active'));

                // Agregar active al item clickeado
                this.classList.add('lp-active');

                // Mantener el dropdown abierto y el link principal activo
                const parentDropdown = this.closest('.lp-nav-item.lp-has-dropdown');
                const parentNavLink = parentDropdown.querySelector('.lp-nav-link');
                parentNavLink.classList.add('lp-active');

                const section = this.getAttribute('data-section');
                console.log('Navegando a subsección:', section);

                if (window.innerWidth <= 768) {
                    setTimeout(closeSidebar, 300);
                }
            });
        });

        // Navegación entre secciones principales (sin dropdown)
        navLinks.forEach(link => {
            // Saltar links que están dentro de dropdowns
            if (link.closest('.lp-nav-item.lp-has-dropdown')) return;

            link.addEventListener('click', function(e) {
                e.preventDefault();

                navLinks.forEach(l => l.classList.remove('lp-active'));
                dropdownItems.forEach(item => item.classList.remove('lp-active'));
                closeAllDropdowns();

                this.classList.add('lp-active');

                const section = this.getAttribute('data-section');
                console.log('Navegando a sección:', section);

                if (window.innerWidth <= 768) {
                    setTimeout(closeSidebar, 300);
                }
            });
        });

        // Logo click
        logoContainer.addEventListener('click', function() {
            console.log('Logo clickeado - Ir al dashboard principal');

            navLinks.forEach(l => l.classList.remove('lp-active'));
            dropdownItems.forEach(item => item.classList.remove('lp-active'));
            closeAllDropdowns();

            // Activar el primer link
            if (navLinks.length > 0) {
                navLinks[0].classList.add('lp-active');
            }
        });

        // Cerrar dropdowns al hacer click fuera
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.lp-nav-item.lp-has-dropdown')) {
                closeAllDropdowns();
            }
        });

        // Cerrar con Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (sidebar.classList.contains('lp-show')) {
                    closeSidebar();
                }
                closeAllDropdowns();
            }
        });

        // Responsive
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeSidebar();
                sidebar.classList.remove('lp-show');
            }
        });
        });

        // Cerrar sidebar con tecla Escape---------------------------------------------------------------
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (sidebar.classList.contains('lp-show')) {
                    closeSidebar();
                }
                // Cerrar todos los dropdowns
                adminDropdown.classList.remove('lp-open');
                serviciosDropdown.classList.remove('lp-open');
                usersDropdown.classList.remove('lp-open');
            }
        });


        // --------------------------Cerrar dropdown al hacer click fuera----------------------------------------------
        document.addEventListener('click', function(e) {
            if (!adminDropdown.contains(e.target)) {
                adminDropdown.classList.remove('lp-open');
            }

            if (!serviciosDropdown.contains(e.target)) {
                serviciosDropdown.classList.remove('lp-open');
            }

            if (!usersDropdown.contains(e.target)) {
                usersDropdown.classList.remove('lp-open');
            }
        });


        // Función para agregar nuevas secciones dinámicamente
        window.addNavSection = function(section) {
            const navMenu = document.getElementById('navMenu');
            const navItem = document.createElement('div');
            navItem.className = 'lp-nav-item';

            navItem.innerHTML = `
                <div class="lp-nav-link" data-section="${section.id}">
                    <div class="lp-nav-icon">
                        <i class="${section.icon}"></i>
                    </div>
                    <div class="lp-nav-text">${section.name}</div>
                </div>
            `;

            navMenu.appendChild(navItem);

            // Agregar event listener al nuevo link
            const newLink = navItem.querySelector('.lp-nav-link');
            newLink.addEventListener('click', function(e) {
                e.preventDefault();
                navLinks.forEach(l => l.classList.remove('lp-active'));
                dropdownItems.forEach(item => item.classList.remove('lp-active'));
                adminDropdown.classList.remove('lp-open');
                this.classList.add('lp-active');
                console.log('Navegando a sección:', section.id);
            });
        };


    </script>

    <script src="{% static 'Core/js/pantalla_carga.js' %}"></script>

</body>
</html>