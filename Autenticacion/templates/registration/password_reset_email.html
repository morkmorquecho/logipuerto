{% autoescape off %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% if welcome %}Bienvenido a {{ site_name }}{% else %}Restablecer contraseña{% endif %}</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .button {
            display: inline-block;
            background-color: #4CAF50;
            color: white !important;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            margin: 15px 0;
        }
        .footer { margin-top: 30px; font-size: 12px; color: #777; }
    </style>
</head>
<body>
    <div class="container">
        {% if welcome %}
        <h2>Bienvenido a {{ site_name }}</h2>
        <p>Hola {{ user.get_username }},</p>
        <p>Se ha creado una cuenta para ti en <strong>{{ site_name }}</strong>. Para activarla y establecer tu contraseña, por favor haz clic en el siguiente enlace:</p>
        {% else %}
        <h2>Restablecimiento de contraseña</h2>
        <p>Hola {{ user.get_username }},</p>
        <p>Hemos recibido una solicitud para restablecer la contraseña de tu cuenta en <strong>{{ site_name }}</strong>. Para continuar, haz clic en el siguiente enlace:</p>
        {% endif %}

        <a href="{{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}" class="button">
            {% if welcome %}Establecer contraseña{% else %}Restablecer contraseña{% endif %}
        </a>

        <p>Si el botón no funciona, copia y pega esta URL en tu navegador:<br>
        <code>{{ protocol }}://{{ domain }}{% url 'password_reset_confirm' uidb64=uid token=token %}</code></p>

        {% if welcome %}
        <p>Este enlace expirará en {{ timeout|default:"24" }} horas. Si no realizas esta acción, deberás solicitar un nuevo enlace.</p>
        {% else %}
        <p>Si no solicitaste este restablecimiento, puedes ignorar este mensaje y tu contraseña permanecerá igual.</p>
        {% endif %}

        <div class="footer">
            <p>Atentamente,<br>El equipo de {{ site_name }}</p>
            <p>Si necesitas ayuda, contáctanos en: <a href="mailto:{{ support_email|default:'soporte@ejemplo.com' }}">{{ support_email|default:'soporte@ejemplo.com' }}</a></p>
        </div>
    </div>
</body>
</html>
{% endautoescape %}